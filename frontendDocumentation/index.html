<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Mini Spotify</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>

<header class="topbar">
    <div class="logo">ğŸµ Mini Spotify</div>
    <div class="user-info">
        <span id="userNameLabel"></span>
        <span id="premiumBadge" class="badge" style="display:none;">PREMIUM</span>
    </div>
</header>

<!-- ========== LOGIN ========== -->
<div class="container" id="loginBox">
    <h2>Iniciar SesiÃ³n</h2>
    <input id="emailLogin" type="email" placeholder="Email">
    <input id="passwordLogin" type="password" placeholder="ContraseÃ±a">
    <button onclick="login()">Entrar</button>

    <p>Â¿No tienes cuenta? 
        <a onclick="showRegister()" class="link">RegÃ­strate aquÃ­</a>
    </p>
</div>

<!-- ========== REGISTER ========== -->
<div class="container" id="registerBox" style="display:none;">
    <h2>Registrarse</h2>
    <input id="usernameReg" type="text" placeholder="Usuario">
    <input id="emailReg" type="email" placeholder="Email">
    <input id="passwordReg" type="password" placeholder="ContraseÃ±a">
    <button onclick="registerUser()">Registrar</button>

    <p><a onclick="showLogin()" class="link">Volver al login</a></p>
</div>

<!-- ===================================================== -->
<!-- ===============   APP PRINCIPAL ====================== -->
<!-- ===================================================== -->

<div id="appWrapper" class="appWrapper" style="display:none;">

    <!-- ===== SIDEBAR ===== -->
    <aside class="sidebar">
        <button class="menu-item" onclick="showView('playlistsView')">ğŸ“‚ Playlists</button>
        <button class="menu-item" onclick="showView('songsView')">ğŸµ Canciones</button>
        <button class="menu-item" onclick="showView('searchView')">ğŸ” Buscar</button>
        <button class="menu-item" onclick="showView('uploadView')">â¬†ï¸ Subir canciÃ³n</button>
        <button class="menu-item" onclick="showView('artistsView')">ğŸ¤ Artistas</button>
    </aside>

    <!-- ===== CONTENIDO PRINCIPAL ===== -->
    <main class="mainContent">

        <div class="main-header">
            <h2>Tu mÃºsica ğŸ§</h2>
            <div class="actions">
                <button class="secondary" onclick="checkPremium()">Ver estado Premium</button>
                <button class="primary" onclick="activatePremium()">Activar Premium (30 dÃ­as)</button>
            </div>
        </div>

        <!-- ========== VISTA 1 - CANCIONES ======== -->
        <section id="songsView" class="view">
            <h3>Todas las canciones</h3>
            <div id="songList" class="song-list"></div>
        </section>

        <!-- ========== VISTA 2 - BUSCADOR ======== -->
        <section id="searchView" class="view" style="display:none;">
            <h3>Buscar canciones</h3>
            <input id="searchInput" placeholder="Buscar por canciÃ³n, artista o Ã¡lbum..." onkeyup="searchSongs()">
            <div id="results" class="song-list"></div>
        </section>

        <!-- ========== VISTA 3 - SUBIR CANCIÃ“N ======== -->
        <section id="uploadView" class="view" style="display:none;">
            <h3>Subir nueva canciÃ³n</h3>
            <div class="uploadBox">
                <input id="songTitle" placeholder="TÃ­tulo">
                <input id="songArtist" type="number" placeholder="ID del artista">
                <input id="songAlbum" type="number" placeholder="ID del Ã¡lbum (opcional)">
                <input id="songDuration" type="text" placeholder="DuraciÃ³n (ej: 4:05)">
                <input id="songFile" type="file" accept="audio/mp3">
                <button onclick="uploadSong()">Subir canciÃ³n</button>
            </div>
        </section>

        <!-- ========== VISTA 4 - ARTISTAS ======== -->
        <section id="artistsView" class="view" style="display:none;">
            <h3>Artistas</h3>

            <div class="artist-form">
                <input id="artistName" type="text" placeholder="Nombre del artista">
                <input id="artistDesc" type="text" placeholder="DescripciÃ³n (opcional)">
                <button onclick="createArtist()">Guardar artista</button>
            </div>

            <div id="artistList"></div>
        </section>

        <!-- ========== VISTA 5 - PERFIL DE ARTISTA ======== -->
        <section id="artistProfileView" class="view" style="display:none;">
            <button class="secondary" onclick="showView('artistsView')">â¬… Volver</button>

            <div id="artistProfile" style="margin-top:10px;"></div>

            <h3 style="margin-top:16px;">Canciones</h3>
            <div id="artistSongs" class="song-list"></div>
        </section>

        <!-- ========= VISTA 5 - PLAYLISTS ========= -->
        <section id="playlistsView" class="view" style="display:none;">

            <h3>Mis Playlists</h3>

        <!-- Crear nueva playlist -->
            <div class="artist-form" style="margin-bottom:15px;">
            <input id="playlistName" type="text" placeholder="Nombre de la playlist">
            <button onclick="createPlaylist()">Crear playlist</button>
            </div>

        <!-- Lista de playlists -->
            <div id="playlistList" class="song-list"></div>

</section>

    </main>
</div>

<div id="playlistModal" class="modal" style="display:none;">
    <div class="modal-box">
        <h3>Agregar a playlist</h3>
        <div id="playlistOptions"></div>
        <button class="secondary" onclick="closePlaylistModal()">Cerrar</button>
    </div>
</div>

<section id="playlistSongsView" class="view" style="display:none;">
    <button class="secondary" onclick="showView('playlistsView')">â¬… Volver</button>
    <h3 id="playlistTitle"></h3>
    <div id="playlistSongs" class="song-list"></div>
</section>


<!-- ========== PLAYER ========= -->
<footer class="player-bar" id="playerBar" style="display:none;">
    <div class="now-playing">
        <span id="nowTitle">Nada sonando</span>
        <span id="nowArtist" class="muted"></span>
    </div>
    <audio id="player" controls></audio>
</footer>

<script src="app.js"></script>
</body>
</html>
